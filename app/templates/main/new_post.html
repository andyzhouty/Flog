{#
Copyright (c) 2020 Andy Zhou
MIT License
#}
{% extends 'base.html' %}
{% from 'bootstrap/form.html' import render_form %}
{% if request.cookies.get('locale') != "" and request.cookies.get('locale') != None %}
    {% set locale = request.cookies.get('locale') %}
{% elif current_user.locale %}
    {% set locale = current_user.locale %}
{% else %}
    {% set locale = 'en-US' %}
{% endif %}
{% block title %}{{ _('Create Post') }}{% endblock %}
{% block styles %}
    {{ super() }}
    {{ static_file('css', '//cdn.jsdelivr.net/npm/jquery-ui-dist@1.12.1/jquery-ui.min.css', local=False)}}
{% endblock %}
{% block page_content %}
    <h1 class="display-4">{{ _('New Post') }}</h1>
    {{ render_form(form) }}
{% endblock %}
{% block scripts %}
    {{ super() }}
    {{ ckeditor.load() }}
    {{ static_file('js', '//cdn.jsdelivr.net/npm/jquery-ui-dist@1.12.1/jquery-ui.min.js', local=False)}}
    {% if locale == 'zh_Hans_CN' or locale == 'zh-CN' %}
    {{ static_file('js', 'js/datepicker-zh-CN.js') }}
    {% endif %}
    <script>
        $(document).ready(function () {
            var locale = "{{ locale }}";
            $('#date').datepicker({
                format: 'yyyy-mm-dd',
                todayHighlight: 1
            });
            {% if locale == 'zh_Hans_CN' or locale == 'zh-CN' %}
                $.datepicker.regional('zh-CN');
            {% endif %}
        });
    </script>
{% endblock scripts %}